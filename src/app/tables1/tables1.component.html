<main class='p-grid p-nogutter'>

<div class='p-col-12'>
    <p-table #pt id="permits_Id" styleClass="p-datatable-striped"
        [value]='data$ | async' [dataKey]="tableDef?.dataKey" [columns]="tableDef?.cols"
        [loading]="loading"
        [resizableColumns]="true"
        selectionMode="single" [(selection)]="selectedRow"
        (onRowSelect)="onRowSelect($event)" (onRowUnselect)="onRowUnSelect($event)"
        [paginator]="true" [rows]="8" [rowsPerPageOptions]="[8,20,35,50]" 
        [showCurrentPageReport]="true" currentPageReportTemplate="{totalRecords} entries"
        [globalFilterFields]="['title']"
        rowHover="true">

        <ng-template pTemplate="caption">
            <div class='p-grid bordered' id="filtersRow">
                <div class="p-col-4">
                    <div class="p-inputgroup" style="float:right">
                        <span class="p-inputgroup-addon"><i class="pi pi-search" style="line-height: 1.25;"></i></span>
                        <input type="text" pInputText placeholder="Name, Plate" 
                            (input)="pt.filterGlobal($event.target.value, 'contains')">
                    </div>
                </div>
                <div class="p-col-4">
                    &nbsp;
                </div>
                <div class="p-col">
                    <button pButton type="button" label="Export" icon="pi pi-file-o"
                        (click)="exportToExcel()">
                    </button>
                </div>
                <!--
                <div class='p-col-12'>
                    <ul class="navList">
                        <li>First Initial:</li>
                        <li *ngFor="let letter of letters">
                            <span [class.active]="currentLetter==letter" (click)='filterByLetter(letter)'>{{letter}}</span>
                        </li>
                    </ul>
                </div>
                -->
            </div>
        </ng-template>

        <ng-template pTemplate="header" let-columns>
            <tr>
                <th style="width:16rem" pSortableColumn="name">Name</th>
                <th pResizableColumn pSortableColumn="description">Description</th>
                <th pSortableColumn="language">Language(s)</th>
                <th>Created</th>
                <th style="width:6rem">Project Size</th>
                <th style="width:6rem">Private</th>
            </tr>
        </ng-template>

        <ng-template pTemplate="body" let-row let-columns="columns" let-ri='rowIndex'>
            <tr [pSelectableRow]="row">
                    <td *ngFor="let f of columns">
                        <div [ngSwitch]="f.type">
                            <span *ngSwitchCase="'date'">{{row[f.field] | date}}</span>
                            <span *ngSwitchCase="'number'">##{{row[f.field]}}</span>
                            <span *ngSwitchDefault>{{row[f.field]}}</span>
                        </div>
                    </td>
            </tr>
        </ng-template>
    </p-table>
</div>
</main>